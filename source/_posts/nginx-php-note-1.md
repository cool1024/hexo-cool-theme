---
title: nginx+php环境安全问题
date: 2018-12-05 15:21:08
tags: ['nginx','php']
---

## 可执行权限

1. 只给需要执行的php脚本权限
```
location /index.php {
    include snippets/fastcgi-php.conf;
    fastcgi_pass unix:/run/php/php7.2-fpm.sock;
}
```
如laravel项目，只需要public目录下的index.php可执行，这样所有其它的脚本文件不会被意外执行

## 文件上传

1. 文件上传校验类型(图片，视频，文档)，避免恶意文件被上传

2. 尽量使用第三方云端上传方案，这样可以更可靠，不容易本地服务器被注入恶意脚本

3. 文件大小设置,本地上传禁止上传大文件，会占用大量服务器资源

## 上线默认关闭调试

避免关键代码泄漏，调试信息有很多关键代码

## 表单数据安全

1. 所有表单数据都不允许明文传输

2. 提交的数据需要进行签名（字典排序，hash值校验）

3. 敏感数据不允许直接传输（身份证，密码等），即使要传输也要加密
